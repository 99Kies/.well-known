(this["webpackJsonpdid-configuration"]=this["webpackJsonpdid-configuration"]||[]).push([[0],{101:function(n,e){},115:function(n,e){},184:function(n,e){},189:function(n,e){},190:function(n,e){},197:function(n,e){},200:function(n,e){},206:function(n,e){},211:function(n,e){},273:function(n,e){},293:function(n,e){},315:function(n,e){},371:function(n,e,t){n.exports=t(653)},376:function(n,e,t){},393:function(n,e){},403:function(n,e){},411:function(n,e){},412:function(n,e){},438:function(n,e){},439:function(n,e){},450:function(n,e){},465:function(n,e){},474:function(n,e){},475:function(n,e){},484:function(n,e){},492:function(n,e){},493:function(n,e){},511:function(n,e){},517:function(n,e){},519:function(n,e){},550:function(n,e){},551:function(n,e){},653:function(n,e,t){"use strict";t.r(e);var r=t(62),o=t.n(r),c=t(368),i=t.n(c),a=(t(376),t(8)),u=t(2),s=t(1),f=t.n(s),l=t(22),d=t(369),p=t.n(d),h=t(462),v=t(478),w=t(654),b=v.suites.Ed25519Signature2018,g=function(){var n=Object(l.a)(f.a.mark((function n(e){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(e,{headers:{Accept:"application/ld+json"},method:"get"}).then((function(n){return n.json()})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),m={resolve:function(){var n=Object(l.a)(f.a.mark((function n(e){var t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g("https://uniresolver.io/1.0/identifiers/"+e);case 2:if(null!==(t=n.sent).didDocument){n.next=5;break}throw new Error("Could not resolve DID with Universal Resolver.");case 5:return n.abrupt("return",t.didDocument);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k={Ed25519Signature2018:new b},x=function(){var n=Object(l.a)(f.a.mark((function n(e){var t,r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.startsWith("did:")){n.next=5;break}return n.next=3,m.resolve(e);case 3:return t=n.sent,n.abrupt("return",{contextUrl:null,document:t,documentUrl:e});case 5:return n.prev=5,n.next=8,h.documentLoader(e);case 8:return r=n.sent,n.abrupt("return",r);case 12:n.prev=12,n.t0=n.catch(5),console.error("No remote context support for ".concat(e));case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}(),y=window.location.origin+"/.well-known/did-configuration.json",_=function(n,e){var t;return n.assertionMethod.forEach((function(r){"string"===typeof r&&r===e&&n.publicKey&&n.publicKey.forEach((function(n){n.id===e&&(t=n)})),r.id===e&&(t=r)})),t};var j=function(){var n=o.a.useState({well_known_did_configuration_uri:y}),e=Object(u.a)(n,2),t=e[0],r=e[1],c=function(){var n=Object(l.a)(f.a.mark((function n(e){var r,o,c,i,a,u,s,l,d,h,v,b,m,y,j;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.next=3,g(t.well_known_did_configuration_uri);case 3:o=n.sent,console.log({did_configuration_resource:o}),c=0;case 6:if(!(c<o.entries.length)){n.next=48;break}if(console.log("processing entry ",c),i=o.entries[c],console.log({entry:i}),"string"!==typeof i){n.next=31;break}return n.next=13,w.JWS.decode(i,{complete:!0});case 13:return a=n.sent,u=a.header,s=a.payload,l=a.signature,console.log({header:u,payload:s,signature:l}),n.next=20,x(u.kid);case 20:if(d=n.sent,h=d.document,console.log(h),v=_(h,u.kid),console.log({key:v}),!v||"secp256k1"!==v.publicKeyJwk.crv){n.next=31;break}return n.next=28,w.JWT.verify(i,v.publicKeyJwk);case 28:b=n.sent,b.vc.credentialSubject.domain===new URL(e).host&&r.push(b.vc.credentialSubject.id);case 31:if("object"!==typeof i){n.next=45;break}if(m=k[i.proof.type]){n.next=36;break}return console.warn("no suite for ",i.proof.type),n.abrupt("continue",45);case 36:return n.next=38,p.a.verifyCredential({credential:i,suite:m,documentLoader:x});case 38:if((y=n.sent).verified){n.next=41;break}return n.abrupt("continue",45);case 41:console.log({verification_result:y}),j=i.credentialSubject.domain===new URL(e).host,console.log({domain_matches_resource_uri:j}),j&&r.push(i.credentialSubject.id);case 45:c++,n.next=6;break;case 48:return n.abrupt("return",[]);case 49:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return o.a.useEffect((function(){Object(l.a)(f.a.mark((function n(){var e;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(t.well_known_did_configuration_uri);case 2:e=n.sent,r(Object(a.a)({},t,{linked_dids:e}));case 4:case"end":return n.stop()}}),n)})))()}),[]),o.a.createElement("div",{style:{padding:"16px"}},o.a.createElement("pre",null,JSON.stringify(t,null,2)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[371,1,2]]]);
//# sourceMappingURL=main.811d655a.chunk.js.map