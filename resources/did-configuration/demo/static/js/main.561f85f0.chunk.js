(this["webpackJsonpdid-configuration"]=this["webpackJsonpdid-configuration"]||[]).push([[0],{101:function(n,e){},115:function(n,e){},184:function(n,e){},189:function(n,e){},190:function(n,e){},197:function(n,e){},200:function(n,e){},206:function(n,e){},211:function(n,e){},273:function(n,e){},293:function(n,e){},315:function(n,e){},371:function(n,e,t){n.exports=t(657)},376:function(n,e,t){},393:function(n,e){},403:function(n,e){},411:function(n,e){},412:function(n,e){},438:function(n,e){},439:function(n,e){},450:function(n,e){},465:function(n,e){},474:function(n,e){},475:function(n,e){},484:function(n,e){},492:function(n,e){},493:function(n,e){},511:function(n,e){},517:function(n,e){},519:function(n,e){},550:function(n,e){},551:function(n,e){},653:function(n,e,t){"use strict";t.r(e),function(n){var e=t(1),r=t.n(e),o=t(17),i=t(655),c=function(){var n=Object(o.a)(r.a.mark((function n(e){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",i(e,{headers:{Accept:"application/ld+json"},method:"get"}).then((function(n){return n.json()})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();n.exports={resolve:function(){var n=Object(o.a)(r.a.mark((function n(e){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.indexOf("did:web:identity.foundation")){n.next=2;break}return n.abrupt("return",t(656));case 2:return n.next=4,c("https://uniresolver.io/1.0/identifiers/"+e);case 4:if(null!==(o=n.sent).didDocument){n.next=7;break}throw new Error("Could not resolve DID with Universal Resolver.");case 7:return n.abrupt("return",o.didDocument);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}.call(this,t(654)(n))},656:function(n){n.exports=JSON.parse('{"@context":["https://www.w3.org/ns/did/v1"],"id":"did:web:identity.foundation","assertionMethod":[{"id":"did:web:identity.foundation#_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A","type":"JwsVerificationKey2020","controller":"did:web:identity.foundation","publicKeyJwk":{"crv":"Ed25519","x":"VCpo2LMLhn6iWku8MKvSLg2ZAoC-nlOyPVQaO3FxVeQ","kty":"OKP","kid":"did:web:identity.foundation#_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A"},"privateKeyJwk":{"crv":"Ed25519","x":"VCpo2LMLhn6iWku8MKvSLg2ZAoC-nlOyPVQaO3FxVeQ","d":"tP7VWE16yMQWUO2G250yvoevfbfxY25GjHglTP3ZOyU","kty":"OKP","kid":"did:web:identity.foundation#_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A"}},{"id":"did:web:identity.foundation#z6Mktts3kfFWDrURs7fNpayz24LZeCGNvCaFMC6KkbeYpZvi","controller":"did:web:identity.foundation","type":"Ed25519VerificationKey2018","privateKeyBase58":"2fu69stzifU5bMzujkLvK1zLLtmYkW9gvpxMSxGvU4GkXm2KM2HS8nn4Uh5ScxnNDjq46Ru2cEKx4Mv9vHjdqKA2","publicKeyBase58":"FSc1AR14tJyxkcpg9229AxnZpczXWKKtfBBPvKgXuM9L"}]}')},657:function(n,e,t){"use strict";t.r(e);var r=t(62),o=t.n(r),i=t(368),c=t.n(i),a=(t(376),t(8)),u=t(2),s=t(1),d=t.n(s),f=t(17),l=t(369),p=t.n(l),v=t(462),w=t(478),b=t(658),h=w.suites.Ed25519Signature2018,y=t(653),k=function(){var n=Object(f.a)(d.a.mark((function n(e){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(e,{headers:{Accept:"application/ld+json"},method:"get"}).then((function(n){return n.json()})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x={Ed25519Signature2018:new h},g=function(){var n=Object(f.a)(d.a.mark((function n(e){var t,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.startsWith("did:")){n.next=5;break}return n.next=3,y.resolve(e);case 3:return t=n.sent,n.abrupt("return",{contextUrl:null,document:t,documentUrl:e});case 5:return n.prev=5,n.next=8,v.documentLoader(e);case 8:return r=n.sent,n.abrupt("return",r);case 12:n.prev=12,n.t0=n.catch(5),console.error("No remote context support for ".concat(e));case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}(),m=window.location.origin+"/.well-known/did-configuration.json",j=function(n,e){var t;return n.assertionMethod.forEach((function(r){"string"===typeof r&&r===e&&n.publicKey&&n.publicKey.forEach((function(n){n.id===e&&(t=n)})),r.id===e&&(t=r)})),t};var _=function(){var n=o.a.useState({well_known_did_configuration_uri:m}),e=Object(u.a)(n,2),t=e[0],r=e[1],i=function(){var n=Object(f.a)(d.a.mark((function n(e){var r,o,i,c,a,u,s,f,l,v,w,h,y,m,_;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.next=3,k(t.well_known_did_configuration_uri);case 3:o=n.sent,console.log({did_configuration_resource:o}),i=0;case 6:if(!(i<o.entries.length)){n.next=48;break}if(console.log("processing entry ",i),c=o.entries[i],console.log({entry:c}),"string"!==typeof c){n.next=31;break}return n.next=13,b.JWS.decode(c,{complete:!0});case 13:return a=n.sent,u=a.header,s=a.payload,f=a.signature,console.log({header:u,payload:s,signature:f}),n.next=20,g(u.kid);case 20:if(l=n.sent,v=l.document,console.log(v),w=j(v,u.kid),console.log({key:w}),!w||"secp256k1"!==w.publicKeyJwk.crv){n.next=31;break}return n.next=28,b.JWT.verify(c,w.publicKeyJwk);case 28:h=n.sent,h.vc.credentialSubject.domain===new URL(e).host&&r.push(h.vc.credentialSubject.id);case 31:if("object"!==typeof c){n.next=45;break}if(y=x[c.proof.type]){n.next=36;break}return console.warn("no suite for ",c.proof.type),n.abrupt("continue",45);case 36:return n.next=38,p.a.verifyCredential({credential:c,suite:y,documentLoader:g});case 38:if((m=n.sent).verified){n.next=41;break}return n.abrupt("continue",45);case 41:console.log({verification_result:m}),_=c.credentialSubject.domain===new URL(e).host,console.log({domain_matches_resource_uri:_}),_&&r.push(c.credentialSubject.id);case 45:i++,n.next=6;break;case 48:return n.abrupt("return",[]);case 49:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return o.a.useEffect((function(){Object(f.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i(t.well_known_did_configuration_uri);case 2:e=n.sent,r(Object(a.a)({},t,{linked_dids:e}));case 4:case"end":return n.stop()}}),n)})))()}),[]),o.a.createElement("div",{style:{padding:"16px"}},o.a.createElement("pre",null,JSON.stringify(t,null,2)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[371,1,2]]]);
//# sourceMappingURL=main.561f85f0.chunk.js.map